import { Link } from '@brillout/docpress'

Vike differs from Next.js in three fundamental ways:
 1. Vike is UI Framework agnostic.
    > Vike is completely agnostic to React and its source code has zero dependency on React. You can actually use Vike with any other UI Framework (Vue, Preact, Solid, etc.).
    >
    > With Vike, you implement and fully control the React integration, which has many benefits. For example, you can use Relay in the same way that Facebook does (with a render-as-you-fetch stream) which isn't possible with Next.js.
 1. Vike is server and deployment agnostic.
    > With Vike, you keep full control over your server and you can use any deployment strategy.
 1. Vike is full-fledged yet minimal.
    > [All dependencies](https://github.com/vikejs/vike/blob/89073c8375d46af7cc05057a8f2efcd833273be6/vike/package.json#L4-L13) are either shared with Vite (e.g. [`fast-glob`](https://github.com/mrmlnc/fast-glob)) or fully/transitively owned (e.g. [`@brillout/json-serializer`](https://github.com/brillout/json-serializer)). Adding Vike to your Vite app doesn't add any frivolous dependency.
    >
    > We believe Vike hits the sweet spot of being a full-fledged frontend tool while avoiding unnecessary bells and whistles.

Beyond these structural differences,
Vike introduces features such as blazing fast HMR (powered by Vite), optional SSR, Domain-driven File Structure, state-of-the-art Code Splitting (powered by Vite/Rollup), Automatic Deployment Synchronization, [Build Your Own Framework](https://vike.land), etc.

> Turbopack replicates some of Vite's techniques, but it's still in its infancy and it will take a while until Turbopack is production-ready. With Vite, you can use lightning fast DX today.

Finally, Vike is a community project: instead of leaning on a framework with business interests that are fundamentally at odds with yours, use a community-driven project that is sponsored by and made for the community.


## UI Framework agnostic

With Vike, you integrate React yourself. This means you need to write a little bit more boilerplate but, in exchange, you get a lot more flexibility.

Because you integrate React yourself, you have full control over the frontend integration of your favorite tools (data fetching, state management, authentication, etc.).

For example, you can use Relay and Apollo in ways that aren't possible with Next.js.

> Relay is a state-of-the-art GraphQL client developed and used at scale by Facebook (which invented GraphQL). The [YouTube video "Re-introducing Relay"](https://www.youtube.com/watch?v=lhVGdErZuN4) explains in detail the benefits of Relay.
>
> Many users and sponsors leverage Vike's flexibility to integrate Relay with SSR Streaming.

Except of React, Vike includes everything you'd expect from a frontend framework: Client-side Routing, HMR, Filesystem Routing, Pre-rendering, Data Fetching, Code Splitting, Layouts, i18n, etc.


## Server/deployment agnostic

From a server perspective, <Link text="Vike is just a middleware" href="/deploy" /> that can run anywhere (AWS, Vercel, Cloudflare, Deno Deploy, etc.).

To integrate Vike, you simply add Vike's middleware to your server (Express.js, Fastify, Edge Worker, Serverless Function,  etc.).

With Vike, you have full control over your server and deployment, one of the most critical aspects of your architecture.


## Manual integrations

As depicted above, Vike's philosophy is that you integrate tools manually instead of being locked into decisions made by your framework. Use any tool you want, however you want.

All-in-all, Vike is less easy, but simpler. For large scale projects, simplicity is *fundamentally* more important than being "easy".

Last but not least, manual integration is fun and insightful. (Whereas fighting a framework is pesky.)


## Build your own framework

Vike is designed from the ground up to enable users to build frameworks on top of Vike.

You can build your own Next.js with only hundreds of lines of code.

> While there are many [uses cases for building your own framework](https://vike.land), the most prominent one is [building company internal frameworks](https://vike.land#scale).

We foster the proliferation of React frameworks, highly-tailored to specific use cases.


## User feedback

[From @Axxxx0n](https://github.com/vikejs/vike/issues/158#issuecomment-934224512):

1. Blazing fast development speed powered by Vite (on-demand transpiling, native ESM).
1. Next.js has to have many examples and a whole plethora of libraries are existing just to integrate some library with Next.js because it's not trivial (for example [next-i18next](https://github.com/isaachinman/next-i18next)). With Vike, you just read the documentation of the library you want to integrate and you're good to go.
1. When new React features arrive you can start to use it right away and don't have to wait for the Next.js team to integrate it. (Streaming API, server components, suspense on server, partial hydration, etc.)
1. Next.js can't read files in `/public` directory after it was built, i.e. user uploaded images.
1. With `getServerSideProps()`, Next.js blocks client-side rendering.
1. You cannot bypass data fetching on client-side navigation ([Next.js - 	&#35;23921](https://github.com/vercel/next.js/discussions/23921)) while with Vike you're flexible and can choose what you want.
1. Next.js is really pushing the Vercel platform and is starting to show in recent feature updates. Features that align with this are getting priority while important fixes are delayed.
1. Next.js is leaning on serverless and complicates usage when you don't want it.


## Other concerns

### Caching

Next.js aggressively uses [caching](https://nextjs.org/docs/app/building-your-application/caching), for performance and cost-saving reasons. Less server load means your app uses less compute resources, which saves you money on Vercel's paid plans, but saves Vercel money on their free tier (which most developers will be on; Vercel's long-tail). Next.js leans towards making as many routes as possible statically rendered (SSG over SSR wherever possible). Caching is enabled by default (both on the server and the client), and you have to **explicitly opt-out** to disable it (using more or less hacky solutions) each time you don't want it. But people are [finding](https://www.reddit.com/r/nextjs/comments/18tkmdb/has_anyone_abandoned_nextjs_after_using_it_on_a/kffjox2/) the aggressive [caching to be a nightmare](https://www.reddit.com/r/nextjs/comments/18tkmdb/has_anyone_abandoned_nextjs_after_using_it_on_a/kfh6nh2/), and hard to disable. Caching can give a wrong/stale view of your app, and cost precious development time hunting for the cause. As the saying goes, _"There are only two hard things in Computer Science: cache invalidation and naming things."_ -- Phil Karlton

Vike does not cache, by design, so by default your app will behave as you expect. If you do want caching however, you can opt-in to it, by using one of the many industry-standard caching tools.


### Server-first mentality

Next.js - made by Vercel, a hosting provider - is server-focused. It now defaults to interpreting all React components as Server Components, so you have to mark React components with "use client" to opt-out of always hitting the server. It makes sense for many types of apps as it reduces the size of client-side bundles (the client doesn't need to download JS libraries that now by default run on the server, e.g. markdown). But the fact that Next.js leans more on the server may not be what you want.

If your product either:

- leans more towards being an app than a site/page
- has a lot of dynamically generated and/or frequently updating content (coming from a DB), where caching doesn't give a lot of gains
- is a [PWA](https://web.dev/learn/pwa/assets-and-data#platform-specific_apps_vs_pwa) and/or local/offline-first
- is a cross-platform app (reusing code between web and native), since native platforms are typically client-centered (and Server Components don't work on React Native)
- should use less server resources (scalability, cost-wise), in favor of requiring slightly more processing power on the client

then the server-first mentality of Next.js and Vercel isn't helpful and can be a hindrance.

With Vike, you can choose setups that fit the aforementioned use cases.
You can completely opt out of SSR, for example by setting the `ssr` setting of <Link href="/href#vike-extension">`vike-react`</Link> to `false`.
You can also use SSR for the first page and then, from there on, use client-only navigation while fetching data directly between the client and the data source (without involving the SSR server).

Vike has first-class support for leaning towards the client-side, with features such as fully optional SSR (turn on/off for whole app, <Link href="/ssr">for some page</Link>, or <Link href="/ClientOnly">for some component</Link>), direct data fetching, pre-rendering (SSG), and [PWA](https://github.com/vite-pwa/vite-plugin-pwa).
At the same time, Vike also has first-class support for SSR use cases.
Vike is made by the community and has no incentive to favor any side of the work-split between the client and the server.


## Detailed comparison table

[From @patryk-smc and @redbar0n](https://github.com/vikejs/vike/issues/158#issuecomment-1250068578):

|                                                                 | Vike                                                       | Next.js                       |
| --------------------------------------------------------------- | ---------------------------------------------------------- | ----------------------------- |
| Bundler                                                         | Vite (dev: esbuild+ESM, prod: Rollup)                      | Webpack                       |     
| UI Framework                                                    | Any (React, Preact, Solid, etc.)                           | React only                    |
| Code-splitting and bundling                                     | Yes                                                        | Yes                           |
| HMR                                                             | Yes, fast                                                  | Yes, slow                     |
| Optional SSR                                                    | Yes                                                        | No                            |
| <p align="center">**SSR**</p>                                   |                                                            |                               |
| Control                                                         | Full control                                               | Limited / Black box                      |
| Renderers                                                       | Yes, create as many you need                               | Just one (`_app.ts` file)      |
| RSC (React Server Components)                                   | Yes, <Link href="/react#react-server-components">partially</Link> | Yes, experimental       |
| <p align="center">**Routing**</p>                                                        |                                                            |                               |
| Filesystem Routing                                              | Yes                                                        | Yes                           |
| <Link text="Domain-driven Filesystem Routing" href="/file-structure#domain-driven" />                                        | Yes                                                        | No                            |
| <Link text="Client Routing" href="/client-routing" />           | Yes                                                        | Yes                           |
| <Link text="Server Routing" href="/server-routing" />           | Yes                                                        | No                            |
| <Link text="Base URL" href="/base-url" />                       | Yes                                                        | Limited                       |
| <p align="center">**Integrations**</p>                                                    |                                                            |                               |
HTTP server | No*, bring your own | Baked-in, custom server partially supported with caveats[[1]](https://github.com/vikejs/vike/issues/158#issuecomment-1355306156)[[2]](https://stackoverflow.com/questions/58742343/do-i-have-to-use-express-in-next-js-project/70945468#70945468) |
| Apollo Client with SSR                                          | Fully supported                                            | Partially supported           |
| Relay with SSR                                                  | Fully supported                                            | Partially supported           |
| <p align="center">**Extras**</p>                                |                                                            |                               |
| Head component                                                  | No*, use a tool like [react-helmet](https://github.com/nfl/react-helmet). | Yes, next/head                |
| Image component                                                 | No*, use an <Link href="/img">image optimizer tool</Link>. | Yes, next/image               |
| API routes                                                      | No*, use your server or an <Link text="RPC tool" href="/api-routes" />.   | Yes                           |
| Internationalization (i18n)                                     | Yes                                                         | Limited                       |
| <Link href="/deploy-sync" />                                    | Yes                                                         | No                            |
| [Build your own framework](https://vike.land)                   | Yes                                                         | No                            |
| <p align="center">**Deployment options**</p>                                              |                                                            |                               |
| Vercel                                                          | Yes, minimal config                                        | Yes, zero config              |
| Cloudflare Workers                                              | Yes, minimal config                                        | No, [work in progress](https://github.com/vercel/next.js/discussions/34179#discussioncomment-3578259)                            |
| Node server (Docker, Heroku, Digital Ocean etc.)                | Yes, minimal config                                        | Yes, but limited              |
| Caching (see own section above)                                 | No*, if needed, use industry-standard caching**.           | App Router [caching](https://nextjs.org/docs/app/building-your-application/caching), [opt-out](https://www.reddit.com/r/nextjs/comments/15wc4nt/nextjs_caching_opt_out/)   |


(\*) Vike doesn't ship those extras by design.
(\**) Industry-standard ways of caching is to use the HTTP Cache-Control header to [cache in the client's browser](https://web.dev/articles/http-cache) and potentially also on a shared/public [CDN](https://www.cloudflare.com/lp/ppc/cdn-x/) cache in front of your server side. Additionally, if you ever need even more caching than that, it's possible to have an in-memory cache on your server-side using e.g. [Redis](https://developer.redis.com/howtos/solutions/microservices/caching/) or Memcached.
